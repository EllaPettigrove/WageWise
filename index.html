<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WageWise</title>
  <style>
    body { font-family: 'Times New Roman', Times, serif; background: #f4f4f4; margin: 0; padding: 20px; }
    .container { max-width: 700px; margin: auto; background: white; padding: 25px; border-radius: 12px; }
    .logo { width: 50px; height: 50px; margin-bottom: 20px; }
    .header { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; justify-content: center; }
    .header h1 { margin: 0; }
    label { display: block; margin-top: 15px; font-weight: bold; }
    input { width: 100%; padding: 10px; margin-top: 5px; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
    select { width: 100%; padding: 10px; margin-top: 5px; border-radius: 6px; border: 1px solid #ccc; box-sizing: border-box; }
    button { margin-top: 20px; padding: 12px; width: 100%; background: #2563eb; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; }
    button:hover { background: #1e4fc7; }
    .section { margin-top: 30px; }
    .result { background: #eef2ff; padding: 15px; border-radius: 10px; margin-top: 20px; text-align: center; }
    .explanation { background: #f0f0f0; padding: 15px; border-radius: 10px; margin-top: 10px; font-size: 14px; }
    .day { display: grid; grid-template-columns: 1fr 1fr; gap: 5px; margin-top: 10px; }
    .day-header { grid-column: 1 / -1; display: block; margin-bottom: 5px; text-align: left; }
    .day label { margin-bottom: 8px; display: block; margin-top: 0; font-weight: bold; text-align: left; }
    .day-holiday { grid-column: 1 / -1; display: flex; align-items: center; gap: 8px; margin: 5px 0; }
    .day-holiday span { font-style: italic; font-size: 14px; }
    .day-holiday input[type="checkbox"] { margin: 0; width: auto; padding: 0; }
    .time-row { grid-column: 1 / -1; display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
    .break-row { grid-column: 1 / -1; display: grid; grid-template-columns: 1fr 1fr; gap: 5px; }
    .button-boxes { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
    .box-btn { padding: 20px; border: 2px solid #2563eb; border-radius: 8px; cursor: pointer; font-weight: bold; text-align: center; background: white; transition: all 0.3s; position: relative; }
    .box-btn#shiftsBtn { background: #d1fae5; border-color: #059669; }
    .box-btn#timesheetBtn { background: #dbeafe; border-color: #1e40af; }
    .box-btn:hover { background: #eef2ff; }
    .box-btn.active { background: #2563eb; color: white; }
    .shifts-container { display: none; }
    .shifts-container.active { display: block; }
    .button-group { display: flex; gap: 10px; }
    .download-btn { background: #10b981; flex: 1; }
    .download-btn:hover { background: #059669; }
    .help-btn { background: #ef4444; flex: 1; }
    .help-btn:hover { background: #dc2626; }
    .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); }
    .modal-content { background-color: white; margin: 5% auto; padding: 30px; border-radius: 12px; width: 80%; max-width: 600px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .modal-title { font-size: 28px; font-weight: bold; color: #dc2626; margin-bottom: 15px; }
    .modal-text { font-size: 16px; line-height: 1.6; margin-bottom: 20px; }
    .close-modal { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
    .close-modal:hover { color: #000; }
    .modal-link { color: #2563eb; text-decoration: none; }
    .modal-link:hover { text-decoration: underline; }
    h1, h2 { text-align: center; }
    .title-box { color: #333; padding: 20px 0; margin-bottom: 20px; display: flex; align-items: center; justify-content: center; gap: 20px; }
    .title-box .logo { margin-bottom: 0; width: 60px; height: 60px; flex-shrink: 0; }
    .title-content { flex: 1; text-align: center; max-width: 400px; }
    .title-content h1 { margin: 0 0 10px 0; font-size: 32px; text-align: center; color: #2563eb; }
    .title-content p { margin: 0; font-size: 14px; line-height: 1.4; font-style: italic; color: #333; }
  </style>
</head>
<body>
  <div class="container">
    <div class="title-box">
      <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
        <rect x="20" y="15" width="60" height="70" rx="3" fill="#2563eb" stroke="#1e4fc7" stroke-width="2"/>
        <line x1="28" y1="28" x2="72" y2="28" stroke="white" stroke-width="2"/>
        <line x1="28" y1="38" x2="72" y2="38" stroke="white" stroke-width="2"/>
        <line x1="28" y1="48" x2="72" y2="48" stroke="white" stroke-width="2"/>
        <path d="M 35 65 L 42 72 L 58 55" fill="none" stroke="white" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
      <div class="title-content">
        <h1>WageWise</h1>
        <p>Get Wise - Get WageWise</p>
      </div>
    </div>

    <div class="header">
      </svg>
    </div>

    <div class="section">
      <h2>Step 1: Award</h2>
      <label>Select Your Award</label>
      <select id="award">
        <option value="hospitality2">Hospitality Award - Level 2</option>
      </select>
      <p style="font-size: 14px;"><i>If unknown, find your award <a href="https://calculate.fairwork.gov.au/FindYourAward" target="_blank">here</a>.</i></p>
    </div>

    <div class="section">
      <h2>Step 2: Hours Worked</h2>
      <div class="button-boxes">
        <div class="box-btn" id="shiftsBtn" onclick="showShiftsInput()">Enter Your Weekly Shifts</div>
        <div class="box-btn" id="timesheetBtn" onclick="showTimesheetUpload()">Upload Your Timesheets<br><i style="font-size: 12px; display: block;">Be Wiser and Subscribe</i></div>
      </div>
      <div class="shifts-container" id="shiftsInput">
        <div id="shifts">
          <div class="day">
            <div class="day-header"><label style="margin-bottom: 8px; display: block; margin-top: 0; font-weight: bold; text-align: left;">Monday</label></div>
            <div class="day-holiday"><span>Public Holiday</span><input type="checkbox" id="monHoliday" /></div>
            <div class="time-row"><select id="monStart"><option value="">Start time</option></select><select id="monEnd"><option value="">End time</option></select></div>
            <div class="break-row"><select id="monBreakStart"><option value="">Break start</option></select><select id="monBreakEnd"><option value="">Break end</option></select></div>
          </div>
          <div class="day">
            <div class="day-header"><label style="margin-bottom: 8px; display: block; margin-top: 0; font-weight: bold; text-align: left;">Tuesday</label></div>
            <div class="day-holiday"><span>Public Holiday</span><input type="checkbox" id="tueHoliday" /></div>
            <div class="time-row"><select id="tueStart"><option value="">Start time</option></select><select id="tueEnd"><option value="">End time</option></select></div>
            <div class="break-row"><select id="tueBreakStart"><option value="">Break start</option></select><select id="tueBreakEnd"><option value="">Break end</option></select></div>
          </div>
          <div class="day">
            <div class="day-header"><label style="margin-bottom: 8px; display: block; margin-top: 0; font-weight: bold; text-align: left;">Wednesday</label></div>
            <div class="day-holiday"><span>Public Holiday</span><input type="checkbox" id="wedHoliday" /></div>
            <div class="time-row"><select id="wedStart"><option value="">Start time</option></select><select id="wedEnd"><option value="">End time</option></select></div>
            <div class="break-row"><select id="wedBreakStart"><option value="">Break start</option></select><select id="wedBreakEnd"><option value="">Break end</option></select></div>
          </div>
          <div class="day">
            <div class="day-header"><label style="margin-bottom: 8px; display: block; margin-top: 0; font-weight: bold; text-align: left;">Thursday</label></div>
            <div class="day-holiday"><span>Public Holiday</span><input type="checkbox" id="thuHoliday" /></div>
            <div class="time-row"><select id="thuStart"><option value="">Start time</option></select><select id="thuEnd"><option value="">End time</option></select></div>
            <div class="break-row"><select id="thuBreakStart"><option value="">Break start</option></select><select id="thuBreakEnd"><option value="">Break end</option></select></div>
          </div>
          <div class="day">
            <div class="day-header"><label style="margin-bottom: 8px; display: block; margin-top: 0; font-weight: bold; text-align: left;">Friday</label></div>
            <div class="day-holiday"><span>Public Holiday</span><input type="checkbox" id="friHoliday" /></div>
            <div class="time-row"><select id="friStart"><option value="">Start time</option></select><select id="friEnd"><option value="">End time</option></select></div>
            <div class="break-row"><select id="friBreakStart"><option value="">Break start</option></select><select id="friBreakEnd"><option value="">Break end</option></select></div>
          </div>
          <div class="day">
            <div class="day-header"><label style="margin-bottom: 8px; display: block; margin-top: 0; font-weight: bold; text-align: left;">Saturday</label></div>
            <div class="day-holiday"><span>Public Holiday</span><input type="checkbox" id="satHoliday" /></div>
            <div class="time-row"><select id="satStart"><option value="">Start time</option></select><select id="satEnd"><option value="">End time</option></select></div>
            <div class="break-row"><select id="satBreakStart"><option value="">Break start</option></select><select id="satBreakEnd"><option value="">Break end</option></select></div>
          </div>
          <div class="day">
            <div class="day-header"><label style="margin-bottom: 8px; display: block; margin-top: 0; font-weight: bold; text-align: left;">Sunday</label></div>
            <div class="day-holiday"><span>Public Holiday</span><input type="checkbox" id="sunHoliday" /></div>
            <div class="time-row"><select id="sunStart"><option value="">Start time</option></select><select id="sunEnd"><option value="">End time</option></select></div>
            <div class="break-row"><select id="sunBreakStart"><option value="">Break start</option></select><select id="sunBreakEnd"><option value="">Break end</option></select></div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>Step 3: Calculate Your Pay</h2>
      <button onclick="calculatePay()">Submit</button>
      <div id="output" class="result" style="display:none"></div>
      <div id="explanation" class="explanation" style="display:none"></div>
      <div class="button-group" style="display:none" id="buttonGroup">
        <button id="downloadBtn" class="download-btn" onclick="downloadPayslip()">Download Payslip</button>
        <button id="helpBtn" class="help-btn" onclick="showUnderpaymentModal()">My Pay Does Not Look Right</button>
      </div>
    </div>
  </div>

  <div id="underpaymentModal" class="modal">
    <div class="modal-content">
      <span class="close-modal" onclick="closeUnderpaymentModal()">&times;</span>
      <div class="modal-title">Under Payment Claims</div>
      <div class="modal-text">
        <p>Employers in Australia have a legal responsibility to pay all casual employees in line with the loading, overtime and public holiday rates as stated in their award.</p>
        <p>If your pay does not look right, consider the following actions:</p>
        <p><strong>1. Download your WageWise generated payslip</strong></p>
        <p><strong>2. Arrange a time to speak with your Employer</strong></p>
        <p style="margin-left: 20px;">1. Ask your Employer how they have calculated your pay and compare this to the correct calculation provided by WageWise.</p>
        <p style="margin-left: 20px;">2. Try to work with your Employer to resolve the discrepancy.</p>
        <p style="margin-left: 20px;">3. If your Employer is unsure whether there has been an underpayment, refer them to the Fair Work Ombudsman, who can help them understand their pay requirements.</p>
        <p><strong>3. If you require further support or information, please contact the Fair Work Ombudsman <a href="https://www.fairwork.gov.au/workplace-problems/common-workplace-problems/my-pay-doesnt-seem-right" target="_blank" class="modal-link">here</a>.</strong></p>
      </div>
    </div>
  </div>

  <script>
    let lastCalculationData = {};

    function populateTimeSelects() {
      const times = [];
      for (let i = 0; i < 24; i++) {
        for (let mins = 0; mins < 60; mins += 15) {
          const hour = i === 0 ? '12' : i < 12 ? i : i === 12 ? '12' : (i - 12);
          const period = i < 12 ? 'am' : 'pm';
          const minStr = mins === 0 ? '00' : mins;
          const label = hour + '.' + minStr + period;
          const value = i + (mins / 60);
          times.push({ label: label, value: value });
        }
      }

      const selects = document.querySelectorAll('select[id$="Start"], select[id$="End"], select[id$="BreakStart"], select[id$="BreakEnd"]');
      selects.forEach(select => {
        times.forEach(time => {
          const option = document.createElement('option');
          option.value = time.value;
          option.textContent = time.label;
          select.appendChild(option);
        });
      });
    }

    function calculateTax(income) {
      let tax = 0;
      if (income <= 18200) tax = 0;
      else if (income <= 45000) tax = (income - 18200) * 0.19;
      else if (income <= 135000) tax = 4288 + (income - 45000) * 0.325;
      else if (income <= 190000) tax = 31288 + (income - 135000) * 0.37;
      else tax = 51638 + (income - 190000) * 0.45;
      return tax;
    }

    function calculatePay() {
      const dayIds = ['mon','tue','wed','thu','fri','sat','sun'];
      let totalGross = 0;
      let explanationText = '';

      dayIds.forEach(id => {
          const start = parseFloat(document.getElementById(id + 'Start').value);
          const end = parseFloat(document.getElementById(id + 'End').value);
          const bStart = parseFloat(document.getElementById(id + 'BreakStart').value);
          const bEnd = parseFloat(document.getElementById(id + 'BreakEnd').value);
          const isPublicHoliday = document.getElementById(id + 'Holiday').checked;

          if (!isNaN(start) && !isNaN(end) && end > start) {
              let pay = 0;
              let breakdown = [];

              if (isPublicHoliday) {
                  // Public holiday - all hours at $64.63
                  let hours = end - start;
                  if (!isNaN(bStart) && !isNaN(bEnd) && bEnd > bStart) {
                      hours -= (bEnd - bStart);
                  }
                  if (hours > 0) {
                      pay = hours * 64.63;
                      breakdown.push(`$64.63 × ${hours.toFixed(2)}h (Public Holiday)`);
                  }
              } else if (id === 'sat') {
                  let hours = end - start;
                  if (!isNaN(bStart) && !isNaN(bEnd) && bEnd > bStart) {
                      hours -= (bEnd - bStart);
                  }
                  if (hours > 0) {
                      pay = hours * 38.78;
                      breakdown.push(`$38.78 × ${hours.toFixed(2)}h`);
                  }
              } else if (id === 'sun') {
                  let hours = end - start;
                  if (!isNaN(bStart) && !isNaN(bEnd) && bEnd > bStart) {
                      hours -= (bEnd - bStart);
                  }
                  if (hours > 0) {
                      pay = hours * 45.24;
                      breakdown.push(`$45.24 × ${hours.toFixed(2)}h`);
                  }
              } else {
                  // Monday-Friday
                  // Night: 0-7 hours = $36.53
                  // Day: 7-19 hours = $32.21
                  // Evening: 19-24 hours = $35.02

                  // Calculate night hours
                  if (start < 7) {
                      let nEnd = Math.min(end, 7);
                      let nHours = nEnd - start;
                      if (!isNaN(bStart) && !isNaN(bEnd) && bStart >= start && bEnd <= nEnd) {
                          nHours -= (bEnd - bStart);
                      }
                      if (nHours > 0) {
                          pay += nHours * 36.53;
                          breakdown.push(`$36.53 × ${nHours.toFixed(2)}h`);
                      }
                  }

                  // Calculate day hours
                  if (start < 19 && end > 7) {
                      let dStart = Math.max(start, 7);
                      let dEnd = Math.min(end, 19);
                      let dHours = dEnd - dStart;
                      if (!isNaN(bStart) && !isNaN(bEnd) && bStart >= dStart && bEnd <= dEnd) {
                          dHours -= (bEnd - bStart);
                      }
                      if (dHours > 0) {
                          pay += dHours * 32.21;
                          breakdown.push(`$32.21 × ${dHours.toFixed(2)}h`);
                      }
                  }

                  // Calculate evening hours
                  if (end > 19) {
                      let eStart = Math.max(start, 19);
                      let eEnd = Math.min(end, 24);
                      let eHours = eEnd - eStart;
                      if (!isNaN(bStart) && !isNaN(bEnd) && bStart >= eStart && bEnd <= eEnd) {
                          eHours -= (bEnd - bStart);
                      }
                      if (eHours > 0) {
                          pay += eHours * 35.02;
                          breakdown.push(`$35.02 × ${eHours.toFixed(2)}h`);
                      }
                  }
              }

              if (pay > 0) {
                  explanationText += `${id.charAt(0).toUpperCase() + id.slice(1)}: ${breakdown.join(' + ')} = ${pay.toFixed(2)}<br>`;
                  totalGross += pay;
              }
          }
      });

      const output = document.getElementById('output');
      const explanationDiv = document.getElementById('explanation');
      const buttonGroup = document.getElementById('buttonGroup');

      const annualGross = totalGross * 52;
      const annualTax = calculateTax(annualGross);
      const annualNet = annualGross - annualTax;
      const weeklyNet = annualNet / 52;

      lastCalculationData = {
        totalGross: totalGross,
        weeklyNet: weeklyNet,
        annualGross: annualGross,
        annualTax: annualTax,
        annualNet: annualNet
      };

      output.style.display = 'block';
      output.innerHTML = `<p><strong>Estimated Gross Pay:</strong> $${totalGross.toFixed(2)}</p>` +
                         `<p><strong>Estimated Net Pay (after Australian tax):</strong> $${weeklyNet.toFixed(2)}</p>`;

      explanationDiv.style.display = 'block';
      explanationDiv.innerHTML = `<strong>How the calculation was made:</strong><br>${explanationText}<br>` +
                                 `Annual gross income multiplied by 52, Australian tax applied, then divided by 52 for weekly net estimate.`;

      buttonGroup.style.display = 'flex';
    }

    function downloadPayslip() {
      const data = lastCalculationData;
      const today = new Date().toLocaleDateString();
      let csvContent = "PAYSLIP\n";
      csvContent += `Generated: ${today}\n\n`;
      csvContent += `Weekly Gross Pay,${data.totalGross.toFixed(2)}\n`;
      csvContent += `Weekly Net Pay,${data.weeklyNet.toFixed(2)}\n\n`;
      csvContent += `Annual Gross Income,${data.annualGross.toFixed(2)}\n`;
      csvContent += `Annual Tax,${data.annualTax.toFixed(2)}\n`;
      csvContent += `Annual Net Income,${data.annualNet.toFixed(2)}\n`;

      const element = document.createElement('a');
      element.setAttribute('href', 'data:text/csv;charset=utf-8,' + encodeURIComponent(csvContent));
      element.setAttribute('download', `payslip_${today.replace(/\//g, '-')}.csv`);
      element.style.display = 'none';
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
    }

    function showUnderpaymentModal() {
      document.getElementById('underpaymentModal').style.display = 'block';
    }

    function closeUnderpaymentModal() {
      document.getElementById('underpaymentModal').style.display = 'none';
    }

    function showShiftsInput() {
      document.getElementById('shiftsInput').classList.add('active');
      document.getElementById('shiftsBtn').classList.add('active');
      document.getElementById('timesheetBtn').classList.remove('active');
    }

    function showTimesheetUpload() {
      document.getElementById('shiftsInput').classList.remove('active');
      document.getElementById('timesheetBtn').classList.add('active');
      document.getElementById('shiftsBtn').classList.remove('active');
    }

    window.onclick = function(event) {
      const modal = document.getElementById('underpaymentModal');
      if (event.target == modal) {
        modal.style.display = 'none';
      }
    }

    window.addEventListener('DOMContentLoaded', populateTimeSelects);
  </script>
</body>
</html>